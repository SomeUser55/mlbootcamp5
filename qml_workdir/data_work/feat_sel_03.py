import datetime
import numpy as np

import os
import sys
sys.path.insert(0, os.getcwd())

from hyperopt import hp, fmin, tpe

import qml_workdir.classes.config
from qml.cv import QCV
from qml.models import QXgb, QAvg
from qml_workdir.classes.models import qm



cv = QCV(qm)



cv.features_sel_add(1395, 14,
                    [
                        'age',
 'height',
 'weight',
 'ap_hi',
 'ap_lo',
 'smoke',
 'alco',
 'active',
 'gender_male',
 'height_low',
 'weight_low',
 'cholesterol_all',
 'gluc_all',
 'cholesterol_1',
 'cholesterol_2',
 'cholesterol_3',
 'gluc_1',
 'gluc_2',
 'gluc_3',
 'ap_error',
 'ap_error_swap',
 'imt',
 'imt_class_all',
 'imt_class_0',
 'imt_class_1',
 'imt_class_2',
 'imt_class_3',
 'imt_class_4',
 'imt_class_5',
 'imt_class_6',
 ],
                    [

                     #'log__ap_hi',

                     'minus__log_ap_hi__log_ap_lo',
                     'minus__ap_hi__ap_lo',

# 'x__age__age',
#  'x__age__height',
#  'div__age__height',
#                      'x__age__gender_male',
#                      'x__age__gender_female',
#                      'x__height__gender_male',
#                      'x__height__gender_female',
#                      'x__weight__gender_male',
#                      'x__weight__gender_female',
#                      'x__ap_hi__gender_male',
#                      'x__ap_hi__gender_female',
#                      'x__ap_lo__gender_male',
                     'x__ap_lo__gender_female',
                     'x__smoke__gender_male',
                     'x__smoke__gender_female',
                     'x__alco__gender_male',
                     'x__alco__gender_female',
                     'x__active__gender_male',
                     'x__active__gender_female',
                     'x__age_years__gender_male',
                     'x__age_years__gender_female',
                     'x__cholesterol_all__gender_male',
                     'x__cholesterol_all__gender_female',
                     'x__gluc_all__gender_male',
                     'x__gluc_all__gender_female',
                     'x__imt__gender_male',
                     'x__imt__gender_female',
                     'x__imt_class_all__gender_male',
                     'x__imt_class_all__gender_female',

 'plus__age__height',
 'minus__age__height',
 'x__age__weight',
 'div__age__weight',
 'plus__age__weight',
 'minus__age__weight',
 'x__age__ap_hi',
 'div__age__ap_hi',
 'plus__age__ap_hi',
 'minus__age__ap_hi',
 'x__age__ap_lo',
 'div__age__ap_lo',
 'plus__age__ap_lo',
 'minus__age__ap_lo',
 'x__age__smoke',
 'div__age__smoke',
 'plus__age__smoke',
 'minus__age__smoke',
 'x__age__alco',
 'div__age__alco',
 'plus__age__alco',
 'minus__age__alco',
 'x__age__active',
 'div__age__active',
 'plus__age__active',
 'minus__age__active',
 'x__age__age_years',
 'div__age__age_years',
 'plus__age__age_years',
 'minus__age__age_years',
 'x__age__cholesterol_all',
 'div__age__cholesterol_all',
 'plus__age__cholesterol_all',
 'minus__age__cholesterol_all',
 'x__age__gluc_all',
 'div__age__gluc_all',
 'plus__age__gluc_all',
 'minus__age__gluc_all',
 'x__age__imt',
 'div__age__imt',
 'plus__age__imt',
 'minus__age__imt',
 'x__age__imt_class_all',
 'div__age__imt_class_all',
 'plus__age__imt_class_all',
 'minus__age__imt_class_all',
 'x__height__height',
 'x__height__weight',
 'div__height__weight',
 'plus__height__weight',
 'minus__height__weight',
 'x__height__ap_hi',
 'div__height__ap_hi',
 'plus__height__ap_hi',
 'minus__height__ap_hi',
 'x__height__ap_lo',
 'div__height__ap_lo',
 'plus__height__ap_lo',
 'minus__height__ap_lo',
 'x__height__smoke',
 'div__height__smoke',
 'plus__height__smoke',
 'minus__height__smoke',
 'x__height__alco',
 'div__height__alco',
 'plus__height__alco',
 'minus__height__alco',
 'x__height__active',
 'div__height__active',
 'plus__height__active',
 'minus__height__active',
 'x__height__age_years',
 'div__height__age_years',
 'plus__height__age_years',
 'minus__height__age_years',
 'x__height__cholesterol_all',
 'div__height__cholesterol_all',
 'plus__height__cholesterol_all',
 'minus__height__cholesterol_all',
 'x__height__gluc_all',
 'div__height__gluc_all',
 'plus__height__gluc_all',
 'minus__height__gluc_all',
 'x__height__imt',
 'div__height__imt',
 'plus__height__imt',
 'minus__height__imt',
 'x__height__imt_class_all',
 'div__height__imt_class_all',
 'plus__height__imt_class_all',
 'minus__height__imt_class_all',
 'x__weight__weight',
 'x__weight__ap_hi',
 'div__weight__ap_hi',
 'plus__weight__ap_hi',
 'minus__weight__ap_hi',
 'x__weight__ap_lo',
 'div__weight__ap_lo',
 'plus__weight__ap_lo',
 'minus__weight__ap_lo',
 'x__weight__smoke',
 'div__weight__smoke',
 'plus__weight__smoke',
 'minus__weight__smoke',
 'x__weight__alco',
 'div__weight__alco',
 'plus__weight__alco',
 'minus__weight__alco',
 'x__weight__active',
 'div__weight__active',
 'plus__weight__active',
 'minus__weight__active',
 'x__weight__age_years',
 'div__weight__age_years',
 'plus__weight__age_years',
 'minus__weight__age_years',
 'x__weight__cholesterol_all',
 'div__weight__cholesterol_all',
 'plus__weight__cholesterol_all',
 'minus__weight__cholesterol_all',
 'x__weight__gluc_all',
 'div__weight__gluc_all',
 'plus__weight__gluc_all',
 'minus__weight__gluc_all',
 'x__weight__imt',
 'div__weight__imt',
 'plus__weight__imt',
 'minus__weight__imt',
 'x__weight__imt_class_all',
 'div__weight__imt_class_all',
 'plus__weight__imt_class_all',
 'minus__weight__imt_class_all',
 'x__ap_hi__ap_hi',
 'x__ap_hi__ap_lo',
 'div__ap_hi__ap_lo',
 'plus__ap_hi__ap_lo',
 'x__ap_hi__smoke',
 'div__ap_hi__smoke',
 'plus__ap_hi__smoke',
 'minus__ap_hi__smoke',
 'x__ap_hi__alco',
 'div__ap_hi__alco',
 'plus__ap_hi__alco',
 'minus__ap_hi__alco',
 'x__ap_hi__active',
 'div__ap_hi__active',
 'plus__ap_hi__active',
 'minus__ap_hi__active',
 'x__ap_hi__age_years',
 'div__ap_hi__age_years',
 'plus__ap_hi__age_years',
 'minus__ap_hi__age_years',
 'x__ap_hi__cholesterol_all',
 'div__ap_hi__cholesterol_all',
 'plus__ap_hi__cholesterol_all',
 'minus__ap_hi__cholesterol_all',
 'x__ap_hi__gluc_all',
 'div__ap_hi__gluc_all',
 'plus__ap_hi__gluc_all',
 'minus__ap_hi__gluc_all',
 'x__ap_hi__imt',
 'div__ap_hi__imt',
 'plus__ap_hi__imt',
 'minus__ap_hi__imt',
 'x__ap_hi__imt_class_all',
 'div__ap_hi__imt_class_all',
 'plus__ap_hi__imt_class_all',
 'minus__ap_hi__imt_class_all',
 'x__ap_lo__ap_lo',
 'x__ap_lo__smoke',
 'div__ap_lo__smoke',
 'plus__ap_lo__smoke',
 'minus__ap_lo__smoke',
 'x__ap_lo__alco',
 'div__ap_lo__alco',
 'plus__ap_lo__alco',
 'minus__ap_lo__alco',
 'x__ap_lo__active',
 'div__ap_lo__active',
 'plus__ap_lo__active',
 'minus__ap_lo__active',
 'x__ap_lo__age_years',
 'div__ap_lo__age_years',
 'plus__ap_lo__age_years',
 'minus__ap_lo__age_years',
 'x__ap_lo__cholesterol_all',
 'div__ap_lo__cholesterol_all',
 'plus__ap_lo__cholesterol_all',
 'minus__ap_lo__cholesterol_all',
 'x__ap_lo__gluc_all',
 'div__ap_lo__gluc_all',
 'plus__ap_lo__gluc_all',
 'minus__ap_lo__gluc_all',
 'x__ap_lo__imt',
 'div__ap_lo__imt',
 'plus__ap_lo__imt',
 'minus__ap_lo__imt',
 'x__ap_lo__imt_class_all',
 'div__ap_lo__imt_class_all',
 'plus__ap_lo__imt_class_all',
 'minus__ap_lo__imt_class_all',
 'x__smoke__smoke',
 'x__smoke__alco',
 'div__smoke__alco',
 'plus__smoke__alco',
 'minus__smoke__alco',
 'x__smoke__active',
 'div__smoke__active',
 'plus__smoke__active',
 'minus__smoke__active',
 'x__smoke__age_years',
 'div__smoke__age_years',
 'plus__smoke__age_years',
 'minus__smoke__age_years',
 'x__smoke__cholesterol_all',
 'div__smoke__cholesterol_all',
 'plus__smoke__cholesterol_all',
 'minus__smoke__cholesterol_all',
 'x__smoke__gluc_all',
 'div__smoke__gluc_all',
 'plus__smoke__gluc_all',
 'minus__smoke__gluc_all',
 'x__smoke__imt',
 'div__smoke__imt',
 'plus__smoke__imt',
 'minus__smoke__imt',
 'x__smoke__imt_class_all',
 'div__smoke__imt_class_all',
 'plus__smoke__imt_class_all',
 'minus__smoke__imt_class_all',
 'x__alco__alco',
 'x__alco__active',
 'div__alco__active',
 'plus__alco__active',
 'minus__alco__active',
 'x__alco__age_years',
 'div__alco__age_years',
 'plus__alco__age_years',
 'minus__alco__age_years',
 'x__alco__cholesterol_all',
 'div__alco__cholesterol_all',
 'plus__alco__cholesterol_all',
 'minus__alco__cholesterol_all',
 'x__alco__gluc_all',
 'div__alco__gluc_all',
 'plus__alco__gluc_all',
 'minus__alco__gluc_all',
 'x__alco__imt',
 'div__alco__imt',
 'plus__alco__imt',
 'minus__alco__imt',
 'x__alco__imt_class_all',
 'div__alco__imt_class_all',
 'plus__alco__imt_class_all',
 'minus__alco__imt_class_all',
 'x__active__active',
 'x__active__age_years',
 'div__active__age_years',
 'plus__active__age_years',
 'minus__active__age_years',
 'x__active__cholesterol_all',
 'div__active__cholesterol_all',
 'plus__active__cholesterol_all',
 'minus__active__cholesterol_all',
 'x__active__gluc_all',
 'div__active__gluc_all',
 'plus__active__gluc_all',
 'minus__active__gluc_all',
 'x__active__imt',
 'div__active__imt',
 'plus__active__imt',
 'minus__active__imt',
 'x__active__imt_class_all',
 'div__active__imt_class_all',
 'plus__active__imt_class_all',
 'minus__active__imt_class_all',
 'x__age_years__age_years',
 'x__age_years__cholesterol_all',
 'div__age_years__cholesterol_all',
 'plus__age_years__cholesterol_all',
 'minus__age_years__cholesterol_all',
 'x__age_years__gluc_all',
 'div__age_years__gluc_all',
 'plus__age_years__gluc_all',
 'minus__age_years__gluc_all',
 'x__age_years__imt',
 'div__age_years__imt',
 'plus__age_years__imt',
 'minus__age_years__imt',
 'x__age_years__imt_class_all',
 'div__age_years__imt_class_all',
 'plus__age_years__imt_class_all',
 'minus__age_years__imt_class_all',
 'x__cholesterol_all__cholesterol_all',
 'x__cholesterol_all__gluc_all',
 'div__cholesterol_all__gluc_all',
 'plus__cholesterol_all__gluc_all',
 'minus__cholesterol_all__gluc_all',
 'x__cholesterol_all__imt',
 'div__cholesterol_all__imt',
 'plus__cholesterol_all__imt',
 'minus__cholesterol_all__imt',
 'x__cholesterol_all__imt_class_all',
 'div__cholesterol_all__imt_class_all',
 'plus__cholesterol_all__imt_class_all',
 'minus__cholesterol_all__imt_class_all',
 'x__gluc_all__gluc_all',
 'x__gluc_all__imt',
 'div__gluc_all__imt',
 'plus__gluc_all__imt',
 'minus__gluc_all__imt',
 'x__gluc_all__imt_class_all',
 'div__gluc_all__imt_class_all',
 'plus__gluc_all__imt_class_all',
 'minus__gluc_all__imt_class_all',
 'x__imt__imt',
 'x__imt__imt_class_all',
 'div__imt__imt_class_all',
 'plus__imt__imt_class_all',
 'minus__imt__imt_class_all',
 'x__imt_class_all__imt_class_all',

                    ], early_stop_cv=lambda x: x>0.545, log_file='qml_workdir/logs/feat03.txt')
